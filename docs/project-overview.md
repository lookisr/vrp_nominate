## Обзор проекта «Премия года VRP»

### Исходные вводные
- Формат: Telegram Mini App + Telegram-бот для администраторов.
- Пользовательский язык: русский.
- Бэкенд: Python (FastAPI).
- База данных: PostgreSQL.
- Аутентификация пользователей: пока не требуется, голосование анонимное.
- Деплой: планируется на выделенный сервер (подготовим инструкции).

### Ответы на уточняющие вопросы
| Вопрос | Ответ |
| --- | --- |
| Предпочтительный стек? | Разработчик выбирает оптимальный. Решение: FastAPI + SQLAlchemy. |
| Хранилище данных? | PostgreSQL. |
| Язык интерфейсов? | Русский. |
| Нужна аутентификация через Telegram? | Пока нет. |
| Планируется деплой? | Да, позже на сервер. |

### Архитектура
- `apps/server`: FastAPI, SQLAlchemy 2.0 (async), Alembic, aiogram.
- `apps/mini-app`: React + Vite + TypeScript, Tailwind CSS, React Query.
- Общая директория `uploads`: хранение изображений номинаций/номинантов.
- `infrastructure/docker-compose.yml`: сервис PostgreSQL для разработки.
- `docs`: документация (текущий файл, инструкции по запуску, деплой).
- `scripts`: служебные скрипты (seed данных, полезные утилиты).
- `tests`: тесты (юнит и e2e).

### Предварительный список зависимостей
- Python: `fastapi`, `uvicorn`, `sqlalchemy[asyncio]`, `asyncpg`, `alembic`, `pydantic`, `python-multipart`, `passlib` (при необходимости), `aiogram`, `pillow`, `numpy` (для проверки изображений), `python-dotenv`.
- Frontend: `react`, `react-dom`, `vite`, `typescript`, `@tanstack/react-query`, `axios`, `tailwindcss`, `postcss`, `autoprefixer`.

### Основные модули бэкенда
- `core`: конфигурация, зависимости, логирование.
- `db`: модели и миграции.
- `api`: публичные эндпоинты (номинации, голосование, результаты) и административные.
- `services`: бизнес-логика (операции с номинациями, номинантами, голосованием).
- `telegram_bot`: сценарии и хэндлеры админского бота.
- `utils`: проверка изображений, общие утилиты.

### План разработки (высокоуровневый)
1. Подготовить базовую структуру и конфигурацию (виртуальное окружение, зависимости).
2. Настроить подключение к PostgreSQL и Alembic-модели.
3. Реализовать CRUD для номинаций и номинантов (REST + загрузка изображений).
4. Настроить логику голосования и управление статусом голосования.
5. Реализовать Mini App (React) с экранами из ТЗ.
6. Добавить Telegram-бота (aiogram) с административными сценариями.
7. Реализовать экспорт CSV и просмотр статистики.
8. Написать инструкции по локальному запуску и подготовке к деплою.
9. Финальное тестирование и проверка соответствия ТЗ.

### Следующие шаги
- Инициализировать Python-проект (`poetry` или `pip`), настроить FastAPI.
- Настроить фронтенд-проект (Vite + React).
- Подготовить docker-compose для PostgreSQL.
- После настройки окружения приступить к реализации бэкенда и фронтенда.

