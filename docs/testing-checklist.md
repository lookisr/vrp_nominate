# Чеклист для тестирования

## Подготовка

- [ ] Скопирован файл `env.example` в `.env`
- [ ] Указан `TELEGRAM_BOT_TOKEN` в `.env`
- [ ] Указан `ADMIN_IDS` в `.env` (ваш Telegram ID)
- [ ] Docker установлен и запущен

## Запуск проекта

- [ ] Образ собран: `docker build -t vrp-app .`
- [ ] Контейнер запущен: `docker run -d --name vrp-app -p 8000:8000 --env-file .env vrp-app`
- [ ] Миграции применены (см. инструкцию ниже)

## Тестирование API

- [ ] Health check работает: `curl http://localhost:8000/health`
- [ ] API документация доступна: http://localhost:8000/docs
- [ ] GET /api/nominations возвращает пустой список (или список номинаций)
- [ ] GET /api/results возвращает результаты

## Тестирование Telegram-бота

- [ ] Бот отвечает на команду `/start`
- [ ] Команда `/admin` показывает меню (если вы администратор)
- [ ] Можно создать номинацию через бота
- [ ] Можно добавить номинанта через бота
- [ ] Можно запустить/остановить голосование
- [ ] Можно посмотреть статистику
- [ ] Можно выгрузить CSV отчёт

## Тестирование Mini App (локально)

- [ ] Фронтенд доступен: http://localhost:8000
- [ ] Главная страница загружается
- [ ] Навигация работает (Главная, Номинации, Итоги)
- [ ] Страница номинаций отображается
- [ ] Страница голосования работает
- [ ] Можно проголосовать за номинанта
- [ ] Страница подтверждения голоса показывается
- [ ] Страница результатов отображается корректно

## Тестирование в Telegram

- [ ] Mini App открывается в Telegram
- [ ] Все экраны работают корректно
- [ ] Голосование работает
- [ ] Результаты обновляются в реальном времени

## Проверка функционала

### Управление номинациями:
- [ ] Создание номинации с названием и изображением
- [ ] Редактирование названия номинации
- [ ] Замена изображения номинации
- [ ] Удаление номинации

### Управление номинантами:
- [ ] Добавление номинанта с именем и изображением
- [ ] Редактирование имени номинанта
- [ ] Замена изображения номинанта
- [ ] Удаление номинанта

### Голосование:
- [ ] Голосование открывается через бота
- [ ] Голосование закрывается через бота
- [ ] При закрытом голосовании кнопка "Проголосовать" неактивна
- [ ] Голоса учитываются корректно

### Результаты:
- [ ] Результаты сортируются по убыванию голосов
- [ ] Статистика в боте отображается корректно
- [ ] CSV файл выгружается и содержит правильные данные

## Проверка изображений

- [ ] Изображения сохраняются корректно
- [ ] Квадратные изображения принимаются
- [ ] Неквадратные изображения отклоняются с сообщением об ошибке
- [ ] Изображения отображаются в Mini App

## Проверка безопасности

- [ ] Только администраторы могут использовать `/admin`
- [ ] Неавторизованные пользователи не могут управлять контентом
- [ ] Голосование работает только когда открыто

## Известные проблемы

Если что-то не работает, проверьте:
1. Логи контейнера: `docker logs vrp-app`
2. Подключение к БД
3. Правильность токена бота
4. Применены ли миграции

## Создание первой миграции

Если миграции ещё не созданы:

```bash
# Войдите в контейнер
docker exec -it vrp-app bash

# Перейдите в директорию бэкенда
cd /app/backend

# Создайте миграцию
alembic revision --autogenerate -m "Initial migration"

# Примените миграции
alembic upgrade head
```

Или используйте скрипт:
```bash
./scripts/create_migration.sh
```

